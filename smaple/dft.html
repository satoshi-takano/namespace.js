<html>
<script type="text/javascript" src="../src/0_lib_define.js"></script>
<script type="text/javascript" src="../src/1_namespace.js"></script>
<script type="text/javascript" src="../src/2_core.js"></script>
<script type="text/javascript" src="../src/3_events.js"></script>
<script type="text/javascript" src="../src/4_geom.js"></script>
<script type="text/javascript" src="../src/5_application.js"></script>
<script type="text/javascript" src="../src/6_tween.js"></script>
<script type="text/javascript" src="../src/7_net.js"></script>
<script type="text/javascript" src="../src/8_display.js"></script>
<script type="text/javascript" src="../src/9_ui.js"></script>
<script type="text/javascript" src="../src/10_native_extention.js"></script>
<script type="text/javascript" src="../src/11_canvas.js"></script>
<script type="text/javascript" src="../src/12_math.js"></script>

<canvas id="canvas" width='500' height='500'>
</canvas>
<script type="text/javascript">

new Namespace(namespace_lib_core).Main.getInstance().main(function (argument) {
	var ns = new Namespace(namespace_lib_canvas)
	var stage = ns.Stage.gen(document.getElementById("canvas"))
	
	var cont = ns.DisplayObjectContainer.gen();
	stage.addChild(cont);
	cont.graphics.beginFill(0);
	cont.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);
	
	new Namespace(namespace_lib_math).Math.sugar();
	var dt = 20;
	var samples = [];
	var real = [];
	var imag = [];
	
	for (var i = 0; i < dt; i++) {
		samples[i] = 0;
		samples[i] += sin(1 * i * 2 * Math.PI / dt);
		samples[i] += sin(4 * i * 2 * Math.PI / dt);
		samples[i] += sin(9 * i * 2 * Math.PI / dt);
	}

	cont.graphics.beginFill(0x00ff00);
	for (var i = 0; i <= samples.length; i++) {
		var x = i * stage.stageWidth / samples.length;
		var y = samples[i];
		if (isNaN(y)) y = samples[i-1];
		cont.graphics.drawCircle(x, y * 10 + stage.stageHeight / 2, 2)
	}

	var real = [];
	var imag = [];
	DFT(dt, samples, real, imag);

	for (i = 0; i < samples.length; i++) {
		var r = real[i];
		var j = imag[i];
		var amp = sqrt(r * r + j * j);
		console.log(i + " Hz : " + (amp + 0.0001));
		x = i * stage.stageWidth / samples.length;
		y = amp * 10;
		cont.graphics.drawRect(x, stage.stageHeight - y, 3, stage.stageHeight - (stage.stageHeight - y));
	}
	
	stage.draw();
});

</script>
<body>
</body>
</html>

